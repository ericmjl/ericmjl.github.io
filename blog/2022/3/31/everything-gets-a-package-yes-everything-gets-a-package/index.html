<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode .terminal {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode a {
            color: #66b3ff;
        }

        body.dark-mode .terminal-menu {
            background-color: #1a1a1a;
        }

        body.dark-mode .terminal-menu li a {
            color: #ffffff;
        }

        body.dark-mode .terminal-menu li a:hover {
            background-color: #333333;
        }

        /* Theme toggle button styles */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
        }

        body.dark-mode .theme-toggle {
            background-color: #333;
            color: #fff;
            border-color: #666;
        }

        .container {
            position: relative;
        }
    </style>
    
<!-- Syntax Highlighter. Use pygments. -->
<link rel="stylesheet" href="../../../../../static/pygments.css">


    

<meta property="og:title" content="Everything gets a package? Yes, everything gets a package.">
<meta property='og:url' content='http://ericmjl.github.io/blog//blog/everything-gets-a-package-yes-everything-gets-a-package' />



    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-51WHZQ1VQ8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-51WHZQ1VQ8');
    </script>

    <!-- PostHog Analytics -->
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Xr es pi Zr rs Kr Qr capture Ni calculateEventProperties os register register_once register_for_session unregister unregister_for_session ds getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty us ns createPersonProfile hs Vr vs opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing ss debug O ls getPageViewId captureTraceFeedback captureTraceMetric qr".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_907JjTIpyrrIxT5wKiahneMoCl6rMc2XNfaYXrGZ3Fe', {
            api_host: 'https://us.i.posthog.com',
            defaults: '2025-11-30',
            person_profiles: 'identified_only',
        })
    </script>

    <link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.2/dist/terminal.min.css" />
    <link rel="stylesheet" href="/static/css/custom.css" />
    <!-- Mathjax -->
    <!-- <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
        </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script> -->

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
        </script>

    <!-- Mermaid.js -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            securityLevel: 'loose'
        });
    </script>
    <style>
        .mermaid {
            background-color: white;
            padding: 1em;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>

</head>

<title>Everything gets a package? Yes, everything gets a package. - Eric J. Ma's Personal Site</title>

<body>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
        <h1 class="logo">
            <a href="/">
                Eric J Ma's Website
            </a>
        </h1>
        <!-- Top Navigation (local links) -->

        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/" rel="">Home</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a class="terminal-prompt" href="/blog" rel="">Blog</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/books" rel="">Books</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/open-source" rel="">Open Source</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/projects" rel="">Projects</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/talks" rel="">Talks</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/teaching" rel="">Teaching</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/user-manual" rel="">User Manual</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/bio" rel="">Bio</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <a href="#" id="search-button" title="Search (Ctrl+K)">Search</a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Body -->
        <div id="body">
            


<div class="terminal-card">
  <header id="post_title" name="post_title">
<!-- Set title style -->
<span name="title" id="title">Everything gets a package? Yes, everything gets a package.</span>
</header>
  <div class="card-body">
    
<!-- Append author -->
<small>
  <p>
    written by
    
    <a class="author" href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on
    <span id="pub_date" name="pub_date">2022-03-31</span>

    
    | tags:
    <!-- Append tags after author -->
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/data science/">
        data science
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/software development/">
        software development
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/software engineering/">
        software engineering
      </a>
    </span>
    
  </p>
  
</small>

    <hr>

    

    <!-- NOTE: I am keeping this here just for preview purposes.
     We must rely on the webp logo for the blog post.
     Pre-commit hooks will ensure that the png logo is converted to webp.-->
    

    
    <div class="blog-summary">
      <i><p>How treating data science projects like software development projects (plus more) helps you be maximally <em>effective</em>.</p>
</i>
    </div>
    

    <span id="post_body" name="post_body">
      <p>I recently read <a href="https://www.ethanrosenthal.com/2022/02/01/everything-gets-a-package/">Ethan Rosenthal's Python Data Science</a> setup,
and I loved every line of it.
His blog post encapsulates some of the best of the ideas
that I wrote about in my <a href="https://ericmjl.github.io/data-science-bootstrap-notes/get-bootstrapped-on-your-data-science-projects/">Data Science Bootstrap knowledge base</a>.
In this blog post, I'd like to share my own data science setup
and some new tooling that I've been working on
to make it <em>easy</em> to achieve the same goals as I have.</p>
<h2 id="but-why-all-the-trouble">But why all the trouble?</h2><p>Isn't there a <em>ton</em> of overhead that comes from doing software work?
You now suddenly have to manage dependencies,
start documenting your functions,
add tests...
you suddenly can't just store data with code in the repo...
I can't just commit the notebook and be done with it?</p>
<p>Let me explain.
Data science is no longer solo work, but teamwork.
The corollary is this: <em>discipline enables better collaborative work</em>.</p>
<p>Have you encountered the following issues?</p>
<ul>
<li>A notebook that works on your colleague's computer trips up on imports?</li>
<li>A notebook that ran on your colleague's machine errors out because you were missing a data file?</li>
<li>Your PyMC model definition doesn't agree with your colleagues',
 because you two were independently editing two notebooks that now each contains drifted model code?</li>
</ul>
<p>These are problems that are solved by thinking more like a software developer and less like a one-off script writer.
Let me explain what to optimize for when adopting this mindset.</p>
<h2 id="optimize-for-portability">Optimize for portability</h2><p>My grad school days taught me the pains of dependency management
and dependency isolation,
so as soon as I borked my MacBook Air's native Py27 environment,
I bought into using <code>conda</code> for environment management.
(That's a long, long story I can tell at some other time.)
I also had to run code locally and on an HPC machine,
and maintaining two separate computation environments means that from the get-go,
I had to learn how to maintain <em>portable</em> environments that could work anywhere.</p>
<p>By buying into the <code>conda</code> package manager
and the associated <code>environment.yml</code> file early on,
it meant I could recreate any project's software environment
with a single command <code>conda env update -f environment.yml</code>.
(Nowadays I use <code>mamba</code> instead of <code>conda</code> because <code>mamba</code> is faster,
but the command is essentially the same.)</p>
<p>Why <code>conda</code>?
On one hand, the ability to install <code>conda</code> into my home directory
means it is a tool I can use anywhere,
as long as I have privileges to install stuff in my home directory
(which, yeah, I figure that should always hold true, right? ðŸ™‚).
On the other hand, I used to find myself on projects
where packages could only be installed <em>with ease</em> from <code>conda</code> -
this holds especially true for cheminformatics projects that I have worked on.</p>
<h2 id="optimize-for-standardized-structure">Optimize for standardized structure</h2><p><a href="https://drivendata.github.io/cookiecutter-data-science/">Cookiecutter Data Science by DrivenData</a>
was the OG inspiration for this idea.
Basically, I ensure that every project I work on
starts with a standardized project directory structure that looks,
at the minimum, something like this:</p>
<div class="hll"><pre><span></span>andorra_geospatial/<span class="w">  </span><span class="c1"># the project name</span>
<span class="p">|</span>-<span class="w"> </span>docs/
<span class="p">|</span>-<span class="w"> </span>notebooks/
<span class="p">|</span>-<span class="w"> </span>andorra_geospatial/<span class="w">  </span><span class="c1"># custom source code, usually named after the project name.</span>
<span class="p">|</span>-<span class="w"> </span>tests/
<span class="p">|</span>-<span class="w"> </span>.gitignore
<span class="p">|</span>-<span class="w"> </span>.pre-commit-config.yaml
<span class="p">|</span>-<span class="w"> </span>environment.yml
<span class="p">|</span>-<span class="w"> </span>pyproject.toml
<span class="p">|</span>-<span class="w"> </span>setup.cfg
<span class="p">|</span>-<span class="w"> </span>setup.py
</pre></div>
<p>If you squint hard,
you'll notice that the project structure
essentially looks like a Python software package,
except that there is also a <code>notebooks/</code> directory added into the mix.
This is intentional!
Structuring every project in this fashion ensures that when future me,
or someone else comes to view the project repository,
they know exactly where to go for code artifacts.</p>
<p>Need an analysis?
Look it up in <code>notebooks/</code>.
Need to find where that function was defined?
Look it up in <code>andorra_geospatial</code> submodules.
Need to add a package?
Update the <code>environment.yml</code> definition
and get <code>conda</code> or <code>mamba</code> to update your environment.
Imposing this structure ensures your code is organized,
and as the CCDS website states:</p>
<blockquote><p>Well organized code tends to be self-documenting
in that the organization itself provides context
for your code without much overhead.</p>
</blockquote>
<p>But what about a <code>data/</code> directory?
That's a good question - lots of people store CSV files in a <code>data/</code> directory.
If working in a professional setting,
it is becoming increasingly idiomatic to pull data from a single source of truth,
such as an PostgreSQL database or an S3 bucket,
rather than caching a local copy.
At work at Moderna,
we have an awesome single source of truth for versioned datasets
from which we pull data programmatically into our projects via a Python client.
(The data is cached locally but not in our repo --
it is cached in a special directory in our home folder.)
In our personal projects,
we can approximate this user experience
by storing data in personal cloud storage (e.g. Dropbox)
and pulling the data using a supporting Python web API
(e.g. the <a href="https://dropbox-sdk-python.readthedocs.io/en/latest/api/dropbox.html#dropbox.dropbox_client.Dropbox.files_download">official Dropbox Python API</a>).</p>
<h2 id="optimize-for-effective-processes-and-habits">Optimize for effective processes and habits</h2><p>Any data scientist has enough knowledge to carry in their heads:
domain expertise, programming skills, modelling skill, and more.
With that amount of knowledge overhead that we already have to carry,
adding more minutiae only adds to more cognitive stress.
Therefore, <em>any kind of <strong>standardized</strong> workflow
that helps us ship our work into our colleagues' hands</em> will,
in the words of <a href="https://twitter.com/imightbemary/status/1405192197696151553">Katie Bauer</a>:</p>
<blockquote><p>ensure (original: ensuring) folks can contribute
without having to hold a bunch of background knowledge in their head,
and reduce (original: reducing) unproductive variance in operations.</p>
</blockquote>
<p>In the spirit of that,
here are some of the processes that I use in my personal and work projects.</p>
<h3 id="follow-the-1-to-1-to-1-to-1-rule">Follow the 1-to-1-to-1-to-1... rule</h3><p>No matter how big or small,
every project gets a <code>git</code> repository on some hosted service,
whether GitHub (my favourite) or Bitbucket.
Doing so ensures that my code can always be pulled into a new machine
from a <em>single source of truth.</em>
That project also gets one conda environment associated with it,
one custom source package associated with it,
one single source of truth documentation,
and one continuous integration pipeline.
In other words, there is always a 1:1 mapping
from project to all of the digital artifacts present in the project,
and there is a single source of truth for everything.
<a href="https://ericmjl.github.io/data-science-bootstrap-notes/follow-the-rule-of-one-to-one-in-managing-your-projects/">I detail more in my Data Science Bootstrap Notes page
on the rule of one-to-one</a>.</p>
<h3 id="commit-code-often">Commit code often</h3><p>By committing code often,
I get the benefit of history in the git log!
I can think about the number of times
I accidentally deleted a chunk of notebook code that I needed later,
and how the git history helped me recover that code chunk.</p>
<p>Additionally, I've also found that my colleagues can benefit from early versions of my code,
even if it's not complete.
Committing and pushing that code up early and often
means my colleagues can take a look at how I'm doing something,
and offer help, offer constructive suggestions,
or even take inspiration from an early version of what I'm working on to unblock their work.</p>
<h3 id="ensure-code-adheres-to-minimum-quality-standards">Ensure code adheres to minimum quality standards</h3><p>All code that I write (that gets placed in the custom source code directory)
should, at the minimum, have a docstring attached to it.
I try to go one step further and ensure that they have type hints
(which are <em>incredibly</em> useful!)
and an example-based test associated with it.
Even better is if the docstring contains
a minimum working example of how to use the chunk of code!</p>
<h3 id="refactor-by-using-source-py-files">Refactor by using source <code>.py</code> files</h3><p>Like any other user of Jupyter notebooks as prototyping environments,
functions I write in the notebook
may end up relying on the internal state of the notebook.
<strong>The cleanest way to ensure that a block of code
operates independently of the internal state of the notebook
is to cut and paste it out into a <code>.py</code> file,
and then re-import the function back into the notebook.</strong>
This is refactoring, data science-style.
By cutting and pasting functions out,
I'm forced to account for every variable inside the function.</p>
<h3 id="pre-define-with-colleagues-what-a-unit-of-work-will-look-like">Pre-define with colleagues what a unit of work will look like</h3><p>When doing team data science, communication and coordination are key.
Usually, there are <em>independent units of work</em> that need to be completed by individuals,
and at times these units of work can run in parallel.
Some examples of these include:</p>
<ol>
<li>Software-oriented pieces of work, such as contributing new functions to the custom library,</li>
<li>Analyses using the same code but on different datasets,</li>
</ol>
<p>In each case, it is highly advantageous for you, the data scientist,
to pre-define with your teammates what a unit of work looks like
and agree upon the boundaries of the unit of work.
If you find stuff out of scope, such as programming style issues that bug you,
it's important to rein in the desire to "just make the change".
Raise the issue with them, find a place to record the issue,
and stay within the bounds of your agreed-upon unit of work.
Use a new pull request to fix that issue so that the pull request doesn't grow unmanageably large.</p>
<h2 id="optimize-for-automation">Optimize for automation</h2><p>Once your processes are well-defined, automation becomes a cinch!
The value of automation is obvious - you save time and effort!
<em>But the value of automation can only be realized
when your processes are also stabilized.</em>
Without a stable process,
you'll never have to execute the same commands over and over and over,
and hence you'll never have the need to automate.
That's because <em>by definition,
we can only automate stable processes and habits</em>.
So if you want to reap the benefits of automation,
you must optimize for effective processes and habits,
stabilize them,
and then you'll be able to build and use the tooling
that optimizes those processes.
Even better if others are able to easily adopt the same processes.</p>
<p>There are a lot of tools that I use to automate my workflow.
They range from tools that create a new project in a standardized fashion
to tools that save keystrokes at the terminal.
Below are some of my own notes taken over time.</p>
<ul>
<li><a href="https://github.com/ericmjl/pyds-cli"><code>pyds-cli</code></a> is a tool I developed,
based on my experiences at work,
to automate routine chains of shell commands.
It automates conda environment management tasks,
standardizes the creation of new projects, and many more.
Still in development, so there may be rough edges.</li>
<li>I also wrote <a href="https://ericmjl.github.io/blog/2018/12/25/conda-hacks-for-data-science-efficiency/">a blog post detailing some <code>conda</code> hacks that I use</a>.</li>
<li>To save typing at the terminal,
I wrote about <a href="https://ericmjl.github.io/data-science-bootstrap-notes/create-shell-command-aliases-for-your-commonly-used-commands/">how to use shell aliases to cut down on typing</a>.</li>
<li>To avoid arguing with your colleagues about minimum code quality standards,
get a bot to enforce them.
In this case, that machine is pre-commit hooks.
<a href="https://ericmjl.github.io/data-science-bootstrap-notes/set-up-pre-commit-hooks-to-automate-checks-before-making-git-commits/">I wrote about how to get set up on my DS Bootstrap Notes.</a></li>
</ul>
<h2 id="summary">Summary</h2><p>This kind of working mode is <em>other-centric</em> rather than <em>self-centered</em>.
It presumes that we're either working on a team,
or that in some point in the future, we will be working on a team.
The shared idioms that a team adopts form the lubricant to the team's interactions;
absent these, we have unproductive variation that form invisible walls to collaboration.
If we adopt <em>collaborative</em> software development practices in our data science work,
we're adopting highly productive team workflows
that will benefit our team productivity and robustness in the long-run!</p>
<h2 id="faq">FAQ</h2><p><em>Why not Docker?</em></p>
<p>Docker is great!
I tend to see it used the most in deployment situations.
As of now, I haven't yet seen a good story
for simultaneously supporting development containers
(which by necessity needs to be beefed up with lots of tooling)
and deployment containers
(which probably should be shrunk in size as much as possible,
<a href="https://uwekorn.com/2021/03/01/deploying-conda-environments-in-docker-how-to-do-it-right.html">as Uwe Korn details in his blog post</a>).
<code>docker-slim</code> is a project that makes a good attempt at slimming down containers,
but I haven't yet had the bandwidth to try it out.</p>
<p><em>Why not just pip/poetry/pipx?</em></p>
<p>In my line of work,
I end up using a lot of conda-only packages,
such as RDKit, so defaulting to <code>conda</code> packages first
tends to make things easier.
Also <code>mamba</code> is amazing ðŸ™‚!</p>
<p><em>What about the problem Ethan detailed - reproducible builds when packages come from different channels?</em></p>
<p>It's important to set the channel priorities in <code>environment.yml</code>.
Packages by default are pulled from the first priority channel,
then the second if not found in the first, and so on and so forth.
If we reason clearly about channel priorities
and pair them with <code>conda env export</code>
and its associated fixed package versions,
then we've got a good story for reproducible conda environments.</p>
<p><em>Can I ask you more questions?</em></p>
<p>Of course!
Send me a message through <a href="http://www.shortwhale.com/ericmjl">Shortwhale</a>.
If enough people ask questions about the same thing,
I'll just update the FAQ here.</p>

    </span>

    
    
    
    
    

    <hr>

    <i>Cite this blog post:</i>
    <div class="hll" style="position: relative;">
    <button class="copy-button" onclick="copyCitation()" title="Copy citation">
      <span class="copy-icon">ðŸ“‹</span>
    </button>
    <pre>
<span id="citation-text"><span><span style="color: darkblue; font-weight: bold">@article</span>{
    <span style="color: black; font-weight: bold">ericmjl-2022-everything-gets-a-package-yes-everything-gets-a-package</span>,
    <span style="color: green; font-weight:bold">author</span> = <span style="color: maroon">{Eric J. Ma}</span>,
    <span style="color: green; font-weight:bold">title</span> = <span style="color: maroon">{Everything gets a package? Yes, everything gets a package.}</span>,
    <span style="color: green; font-weight:bold">year</span> = <span style="color: maroon">{2022}</span>,
    <span style="color: green; font-weight:bold">month</span> = <span style="color: maroon">{03}</span>,
    <span style="color: green; font-weight:bold">day</span> = <span style="color: maroon">{31}</span>,
    <span style="color: green; font-weight:bold">howpublished</span> = <span style="color: maroon">{\url{https://ericmjl.github.io}}</span>,
    <span style="color: green; font-weight:bold">journal</span> = <span style="color: maroon">{Eric J. Ma's Blog}</span>,
    <span style="color: green; font-weight:bold">url</span> = <span style="color: maroon">{https://ericmjl.github.io/blog/2022/3/31/everything-gets-a-package-yes-everything-gets-a-package}</span>,
}
  </span></pre>
    </div>

    <script>
    function copyCitation() {
      const citationElement = document.getElementById('citation-text');
      const text = citationElement.textContent;

      // Create a temporary textarea element
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);

      // Select and copy the text
      textarea.select();
      document.execCommand('copy');

      // Remove the temporary textarea
      document.body.removeChild(textarea);

      // Visual feedback
      const button = document.querySelector('.copy-button');
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="copy-icon">âœ“</span>';
      button.style.backgroundColor = '#4CAF50';

      // Reset button after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.backgroundColor = '';
      }, 2000);
    }
    </script>

    <style>
    .copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: transparent;
      color: #666;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      z-index: 1;
    }

    .copy-button:hover {
      background-color: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    .copy-icon {
      font-size: 14px;
    }
    </style>
    <hr>
    <p>
      <i>I send out a newsletter with tips and tools
        for data scientists. Come check it out at
        <a href="https://dspn.substack.com">Substack</a>.</i>
    </p>
    <p>
      <i><span>If you would like to sponsor the coffee that goes into making my posts,
        please consider </span>
        <a href="https://github.com/sponsors/ericmjl">GitHub Sponsors</a>!</i>
    </p>
    <p>
      <i><span>Finally, I do free 30-minute GenAI strategy calls for teams
        that are looking to leverage GenAI for maximum impact. Consider </span>
        <a href="https://calendly.com/ericmjl/llm-chat">booking a call on Calendly</a>
        if you're interested!</i>
      </i>
    </p>
  </div>
  <div class="giscus" id="giscus-container"></div>
  <script>
    // Determine theme from localStorage or fallback to light
    var theme = localStorage.getItem('theme') === 'dark' ? 'dark' : 'light';
    var giscusScript = document.createElement('script');
    giscusScript.src = 'https://giscus.app/client.js';
    giscusScript.setAttribute('data-repo', 'ericmjl/website');
    giscusScript.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnk2MDIzMzAxNg==');
    giscusScript.setAttribute('data-category', 'Comments');
    giscusScript.setAttribute('data-category-id', 'DIC_kwDOA5cVOM4Crqx4');
    giscusScript.setAttribute('data-mapping', 'pathname');
    giscusScript.setAttribute('data-strict', '1');
    giscusScript.setAttribute('data-reactions-enabled', '1');
    giscusScript.setAttribute('data-emit-metadata', '0');
    giscusScript.setAttribute('data-input-position', 'top');
    giscusScript.setAttribute('data-theme', theme);
    giscusScript.setAttribute('data-lang', 'en');
    giscusScript.crossOrigin = 'anonymous';
    giscusScript.async = true;
    document.getElementById('giscus-container').appendChild(giscusScript);
  </script>
</div>



        </div>

        <!-- Bottom Navigation (external links) -->
        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/resume" rel="">
                            Resume</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.linkedin.com/in/ericmjl" rel="">
                            LinkedIn</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="http://github.com/ericmjl" rel="">
                            GitHub</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl--shortmail-run-app.modal.run/send/cce87ae9c1d7" rel="">
                            Contact Me</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/blog.xml" rel="">
                            Blog RSS</a>
                    </li>
                    
                </ul>
            </nav>
        </div>

    </div>

    <script>
        // Theme toggle functionality
        function setGiscusTheme(theme) {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (!iframe) return;
            iframe.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme
                        }
                    }
                },
                'https://giscus.app'
            );
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');

            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                themeToggle.textContent = 'ðŸŒ™';
                localStorage.setItem('theme', 'light');
                setGiscusTheme('light');
            } else {
                body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
                setGiscusTheme('dark');
            }
        }

        // Check for saved theme preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');

            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
                setTimeout(() => setGiscusTheme('dark'), 500);
            } else {
                setTimeout(() => setGiscusTheme('light'), 500);
            }
        });
    </script>

    <!-- Search functionality -->
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="/static/js/search.js"></script>
</body>
