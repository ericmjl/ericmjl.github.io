<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode .terminal {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode a {
            color: #66b3ff;
        }

        body.dark-mode .terminal-menu {
            background-color: #1a1a1a;
        }

        body.dark-mode .terminal-menu li a {
            color: #ffffff;
        }

        body.dark-mode .terminal-menu li a:hover {
            background-color: #333333;
        }

        /* Theme toggle button styles */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
        }

        body.dark-mode .theme-toggle {
            background-color: #333;
            color: #fff;
            border-color: #666;
        }

        .container {
            position: relative;
        }
    </style>
    
<!-- Syntax Highlighter. Use pygments. -->
<link rel="stylesheet" href="../../../../../static/pygments.css">


    

<meta property="og:title" content="Wow, Marimo!">
<meta property='og:url' content='http://ericmjl.github.io/blog//blog/wow-marimo' />



    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-51WHZQ1VQ8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-51WHZQ1VQ8');
    </script>

    <!-- PostHog Analytics -->
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Xr es pi Zr rs Kr Qr capture Ni calculateEventProperties os register register_once register_for_session unregister unregister_for_session ds getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty us ns createPersonProfile hs Vr vs opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing ss debug O ls getPageViewId captureTraceFeedback captureTraceMetric qr".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_907JjTIpyrrIxT5wKiahneMoCl6rMc2XNfaYXrGZ3Fe', {
            api_host: 'https://us.i.posthog.com',
            defaults: '2025-11-30',
            person_profiles: 'identified_only',
        })
    </script>

    <link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.2/dist/terminal.min.css" />
    <link rel="stylesheet" href="/static/css/custom.css" />
    <!-- Mathjax -->
    <!-- <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
        </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script> -->

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
        </script>

    <!-- Mermaid.js -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            securityLevel: 'loose'
        });
    </script>
    <style>
        .mermaid {
            background-color: white;
            padding: 1em;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>

</head>

<title>Wow, Marimo! - Eric J. Ma's Personal Site</title>

<body>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
        <h1 class="logo">
            <a href="/">
                Eric J Ma's Website
            </a>
        </h1>
        <!-- Top Navigation (local links) -->

        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/" rel="">Home</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a class="terminal-prompt" href="/blog" rel="">Blog</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/books" rel="">Books</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/open-source" rel="">Open Source</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/projects" rel="">Projects</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/talks" rel="">Talks</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/teaching" rel="">Teaching</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/user-manual" rel="">User Manual</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/bio" rel="">Bio</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <a href="#" id="search-button" title="Search (Ctrl+K)">Search</a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Body -->
        <div id="body">
            


<div class="terminal-card">
  <header id="post_title" name="post_title">
<!-- Set title style -->
<span name="title" id="title">Wow, Marimo!</span>
</header>
  <div class="card-body">
    
<!-- Append author -->
<small>
  <p>
    written by
    
    <a class="author" href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on
    <span id="pub_date" name="pub_date">2025-04-08</span>

    
    | tags:
    <!-- Append tags after author -->
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/marimo/">
        marimo
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/reactive notebooks/">
        reactive notebooks
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/uv/">
        uv
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/deployment/">
        deployment
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/serverless/">
        serverless
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/data science/">
        data science
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/modal/">
        modal
      </a>
    </span>
    
  </p>
  
</small>

    <hr>

    
    
    <img src="logo.webp" class="banner-image" >
    

    <!-- NOTE: I am keeping this here just for preview purposes.
     We must rely on the webp logo for the blog post.
     Pre-commit hooks will ensure that the png logo is converted to webp.-->
    

    
    <div class="blog-summary">
      <i><p>In this blog post, I share my experience with Marimo notebooks, highlighting their fully reactive nature and self-contained environments. I discuss how to run Marimo without installation using <code>uv</code>, and the benefits of AI-assisted coding. I also cover exporting notebooks to Markdown and deploying them as Modal apps. While Marimo's keybindings differ from Jupyter, its reactive execution and UI builder offer unique advantages. Curious about how Marimo can transform your coding workflow?</p>
</i>
    </div>
    

    <span id="post_body" name="post_body">
      <p>I have been using Marimo notebooks recently, and I'm thoroughly impressed. There are many benefits to using <code>marimo</code>. The biggest are fully reactive notebooks, such that if you change a cell and execute it, all cells that depend on it will automatically re-execute, and self-contained notebook environments, so you never have to create a scratch environment to run a notebook. If you haven't started test-driving Marimo to see whether it works for you, I think it's time to start experimenting!</p>
<h2 id="run-marimo-without-ever-installing-it">Run Marimo... without ever installing it</h2><p>Thanks to <code>uv</code>, we can run <code>marimo</code> without ever needing to explicitly install it. This is a major upgrade from installing it with <code>pip</code>/<code>conda</code> and having to remember where on my <a href="https://ericmjl.github.io/essays-on-data-science/software-skills/environment-variables/">PATH environment variable</a> <code>marimo</code> is. No more asking the question, "Did I install it in my base conda environment? Or was it installed in another env?"</p>
<p>To do this, with <code>uv</code> installed on your <code>PATH</code>:</p>
<div class="hll"><pre><span></span>uvx<span class="w"> </span>marimo<span class="w"> </span>edit<span class="w"> </span>--sandbox<span class="w"> </span>/path/to/notebook.py
</pre></div>
<p>The notebook will get created automatically if it doesn't exist.</p>
<p>What I love about this is that I get to use the latest <code>marimo</code> all the time. And I don't have to think about what version of <code>marimo</code> I'm carrying around in my local machine. <code>uv</code> is providing the equivalent of a serverless API for CLI tools.</p>
<h2 id="ensure-notebooks-carry-their-own-environment">Ensure notebooks carry their own environment</h2><p>Marimo notebooks can be self-contained, with Python dependencies fully-specified in-file with <a href="https://packaging.python.org/en/latest/specifications/inline-script-metadata/">PEP723-compatible in-line script metadata</a>. The way to ensure that this is done is by running exactly the command above, with <code>--sandbox</code> being the key. Additionally, if you add packages to the self-contained notebook via UI, they automagically get added into the in-line script metadata. The resulting file looks something like this:</p>
<div class="hll"><pre><span></span><span class="c1"># /// script</span>
<span class="c1"># requires-python = &quot;&gt;=3.12&quot;</span>
<span class="c1"># dependencies = [</span>
<span class="c1">#     &quot;anthropic==0.49.0&quot;,</span>
<span class="c1">#     &quot;arviz==0.21.0&quot;,</span>
<span class="c1">#     &quot;joypy==0.2.6&quot;,</span>
<span class="c1">#     &quot;jupyter-core==5.7.2&quot;,</span>
<span class="c1">#     &quot;marimo&quot;,</span>
<span class="c1">#     &quot;matplotlib==3.10.1&quot;,</span>
<span class="c1">#     &quot;nbformat==5.10.4&quot;,</span>
<span class="c1">#     &quot;numba==0.61.0&quot;,</span>
<span class="c1">#     &quot;numpy==2.1.0&quot;,</span>
<span class="c1">#     &quot;nutpie==0.14.3&quot;,</span>
<span class="c1">#     &quot;pandas==2.2.3&quot;,</span>
<span class="c1">#     &quot;pymc==5.21.1&quot;,</span>
<span class="c1">#     &quot;seaborn==0.13.2&quot;,</span>
<span class="c1">#     &quot;tqdm==4.67.1&quot;,</span>
<span class="c1"># ]</span>
<span class="c1"># ///</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">marimo</span>

<span class="n">__generated_with</span> <span class="o">=</span> <span class="s2">&quot;0.12.2&quot;</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">marimo</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">cell</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">():</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">marimo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mo</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">mo</span><span class="p">,)</span>

<span class="c1"># ...the rest of the notebook below...</span>
</pre></div>
<p>Also, you can specify alternate sources in-line, with this example coming from my Network Analysis Made Simple repository:</p>
<div class="hll"><pre><span></span><span class="c1"># /// script</span>
<span class="c1"># requires-python = &quot;&gt;=3.13&quot;</span>
<span class="c1"># dependencies = [</span>
<span class="c1">#     &quot;ipython==9.1.0&quot;,</span>
<span class="c1">#     &quot;marimo&quot;,</span>
<span class="c1">#     &quot;matplotlib==3.10.1&quot;,</span>
<span class="c1">#     &quot;nams==0.0.2&quot;,</span>
<span class="c1">#     &quot;networkx==3.4.2&quot;,</span>
<span class="c1">#     &quot;numpy==2.2.5&quot;,</span>
<span class="c1">#     &quot;pyprojroot==0.3.0&quot;,</span>
<span class="c1">#     &quot;tqdm==4.67.1&quot;,</span>
<span class="c1"># ]</span>
<span class="c1"># [[tool.uv.index]]</span>
<span class="c1"># name = &quot;ericmjl-personal-packages&quot;</span>
<span class="c1"># url = &quot;https://ericmjl--pypiserver-server.modal.run/simple/&quot;</span>
<span class="c1"># explicit = true</span>
<span class="c1"># [tool.uv.sources]</span>
<span class="c1"># nams = { index = &quot;ericmjl-personal-packages&quot; }</span>
<span class="c1"># ///</span>
</pre></div>
<h2 id="install-local-package-in-editable-mode">Install local package in editable mode</h2><p>You can interact with your local package in editable mode with Marimo notebooks. To do so you can add the package using the <code>packages</code> tab in the UI:</p>
<div class="hll"><pre><span></span>-e<span class="w"> </span>&lt;package-name&gt;<span class="w"> </span>@<span class="w"> </span>.
</pre></div>
<p>It will be installed in editable mode, and it will be added to the in-line script metadata:</p>
<div class="hll"><pre><span></span><span class="c1"># /// script</span>
<span class="c1"># requires-python = &quot;&gt;=3.12&quot;</span>
<span class="c1"># dependencies = [</span>
<span class="c1">#     &quot;&lt;package-name&gt;==&lt;version-in-pyproject.toml&gt;&quot;,</span>
<span class="c1">#     &quot;marimo&quot;,</span>
<span class="c1">#     ...</span>
<span class="c1"># ]</span>
<span class="c1"># ///</span>
</pre></div>
<h2 id="enable-ai-assistance-with-marimo-notebooks">Enable AI assistance with Marimo notebooks</h2><p>At this point, for anyone experienced enough in code writing, writing code with AI assistance is pretty much table stakes. (If you are just starting out, I would still encourage you to seek out a human mentor to teach you good patterns for writing reliable code!) Marimo has support for AI-assisted coding, and though it has some rough spots, I think it's worth taking a look at.</p>
<p>To enable AI assistance, you'll need an API key for one of the major API providers (OpenAI, Anthropic, Google), and you can enable code completion using GitHub Copilot, Codeium, or Ollama (custom).</p>
<p>That said, having gotten used to Cursor's more interactive style of coding assistance, I found Marimo's implementation of AI assistance to be a tad constraining. I can't do multi-cell edits, for example, and the connection to GitHub Copilot (for inline assistance) often shows an error connecting. My workaround for now has been to write a bunch of cells in Marimo, and then switch over to Cursor to directly edit the <code>.py</code> file (e.g. to condense it to be less verbose, or correct inconsistencies I might have accumulated).</p>
<h2 id="run-a-marimo-notebook-directly-from-the-web">Run a marimo notebook directly from the web</h2><div class="hll"><pre><span></span>uvx<span class="w"> </span>marimo<span class="w"> </span>edit<span class="w"> </span>--sandbox<span class="w"> </span>https://url.to/your/notebook.py
</pre></div>
<p>This is so, so, so, so powerful and convenient! Simply point <code>marimo</code> to an existing URL that constitutes the notebook, and <code>marimo</code> will clone it and run it within a sandboxed environment for you. There is also an option there to run it within a Dockerized container of its own too, so it'll be entirely fenced off from your system.</p>
<h2 id="export-marimo-notebooks-as-markdown-jupyter-notebook-style">Export Marimo notebooks as Markdown, Jupyter notebook-style</h2><p>When I wrote my blog post on the use of the <a href="https://ericmjl.github.io/blog/2025/4/3/bayesian-superiority-estimation-with-r2d2-priors-a-practical-guide-for-protein-screening/">R2D2 prior and Bayesian probability of superiority calculation</a>, I used <code>marimo</code> alongside <code>uvx</code> to write the post with prose alongside code. One thing I wanted to do was to export it as a Markdown file with cell execution outputs, but Marimo's markdown exports don't carry the capability to do so natively.</p>
<p>Pre-requisites:</p>
<ol>
<li>Make sure that your notebooks contain <code>nbformat</code> as part of its PEP723-style dependency declaration, and</li>
<li>Make sure you have <code>uv</code> installed on your system.</li>
</ol>
<p>Firstly, export Marimo notebook while including outputs to a Jupyter notebook:</p>
<div class="hll"><pre><span></span>uvx<span class="w"> </span>marimo<span class="w"> </span><span class="nb">export</span><span class="w"> </span>ipynb<span class="w"> </span>/path/to/notebook.py<span class="w"> </span>-o<span class="w"> </span>/path/to/notebook.ipynb<span class="w"> </span>--include-outputs<span class="w"> </span>--sandbox
</pre></div>
<p>Secondly, export the Jupyter notebook to Markdown:</p>
<div class="hll"><pre><span></span>uvx<span class="w"> </span>--with<span class="w"> </span>nbconvert<span class="w"> </span>--from<span class="w"> </span>jupyter-core<span class="w"> </span>jupyter<span class="w"> </span>nbconvert<span class="w"> </span>--to<span class="w"> </span>markdown<span class="w"> </span>/path/to/notebook.ipynb
</pre></div>
<p>And in this way, your notebook will be exportable to Markdown with outputs from the notebook cells. It took me a little while to figure this out, but now that I did, I'm glad I have it as an option, as I can now write entire notebooks in Marimo notebooks and have them exportable to my blog or eBooks.</p>
<h2 id="serve-a-marimo-notebook-as-a-modal-app">Serve a marimo notebook as a Modal app</h2><p>As it turns out, with Modal's ability to serve up <em>any</em> arbitrary web server, we can deploy Marimo notebooks to Modal easily.</p>
<p>Given a Marimo notebook that looks like this:</p>
<div class="hll"><pre><span></span><span class="c1"># file: demo.py</span>
<span class="c1"># /// script</span>
<span class="c1"># requires-python = &quot;&gt;=3.12&quot;</span>
<span class="c1"># dependencies = [</span>
<span class="c1">#     &quot;anthropic==0.49.0&quot;,</span>
<span class="c1">#     &quot;pandas==2.2.3&quot;,</span>
<span class="c1"># ]</span>
<span class="c1"># ///</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">marimo</span>

<span class="n">__generated_with</span> <span class="o">=</span> <span class="s2">&quot;0.12.2&quot;</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">marimo</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="n">layout_file</span><span class="o">=</span><span class="s2">&quot;layouts/demo.grid.json&quot;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">cell</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">():</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">pd</span><span class="p">,)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">cell</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="n">pd</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Emma&#39;</span><span class="p">,</span> <span class="s1">&#39;Michael&#39;</span><span class="p">,</span> <span class="s1">&#39;Sarah&#39;</span><span class="p">,</span> <span class="s1">&#39;David&#39;</span><span class="p">],</span>
        <span class="s1">&#39;Age&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
        <span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;Paris&#39;</span><span class="p">,</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">],</span>
        <span class="s1">&#39;Salary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">50000</span><span class="p">,</span> <span class="mi">60000</span><span class="p">,</span> <span class="mi">75000</span><span class="p">,</span> <span class="mi">55000</span><span class="p">,</span> <span class="mi">65000</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">df</span>
    <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">df</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
<p>And a Modal deployment script that looks like this:</p>
<div class="hll"><pre><span></span><span class="c1"># file: deployment.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">modal</span>

<span class="n">image</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">modal</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">debian_slim</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pip_install</span><span class="p">([</span><span class="s2">&quot;uv&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">add_local_file</span><span class="p">(</span><span class="s2">&quot;demo.py&quot;</span><span class="p">,</span> <span class="s2">&quot;/app/demo.py&quot;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">add_local_dir</span><span class="p">(</span><span class="s2">&quot;layouts&quot;</span><span class="p">,</span> <span class="s2">&quot;/app/layouts&quot;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">workdir</span><span class="p">(</span><span class="s2">&quot;/app&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">modal</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;marimo-app&quot;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span> <span class="n">allow_concurrent_inputs</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="nd">@modal</span><span class="o">.</span><span class="n">web_server</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="n">startup_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">marimo_app</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>

    <span class="c1"># Port must match the web_server port, and host must be 0.0.0.0 for this to work.</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;uvx marimo run demo.py --sandbox --port 8000 --host 0.0.0.0 --headless&quot;</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
<p>One can iterate quickly on the notebook in Marimo, and then once you're ready, check that the deployment works (for fast iteration):</p>
<div class="hll"><pre><span></span>modal<span class="w"> </span>serve<span class="w"> </span>deployment.py
</pre></div>
<p>And to do the final deployment (best done via GitHub CI/CD):</p>
<div class="hll"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI/CD</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MODAL_TOKEN_ID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.MODAL_TOKEN_ID }}</span>
<span class="w">      </span><span class="nt">MODAL_TOKEN_SECRET</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.MODAL_TOKEN_SECRET }}</span>
<span class="w">      </span><span class="nt">DEPLOY_ENV</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.event_name == &#39;pull_request&#39; &amp;&amp; &#39;test&#39; || &#39;main&#39; }}</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout Repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install the latest version of uv</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">astral-sh/setup-uv@v5</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latest&quot;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install Modal</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">uv tool install modal</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy job</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">echo &quot;Deploying with $DEPLOY_ENV environment&quot;</span>
<span class="w">          </span><span class="no">modal deploy deployment.py -e $DEPLOY_ENV</span>
</pre></div>
<p>This gives you an outlet to deploy Marimo apps in a completely serverless fashion. Super good for runtime costs!</p>
<p>But Modal apps can run in WASM already, though, so why bother? It turns out not every Python package is built with WASM as a target or has issues running in WASM (PyMC is one of the latter), so this gives us an alternative way of sharing notebooks with others.</p>
<h2 id="what-one-needs-to-get-used-to">What one needs to get used to</h2><p>Here are some things that I know I had to get used to with Marimo:</p>
<ol>
<li>The keybindings are different from Jupyter notebooks. I can't just <code>Esc+a</code> or <code>Esc+b</code> to quickly add a new cell above or below my current cell. <code>Cmd+Enter</code> is what's used, not <code>Ctrl+Enter</code>. Having default keybindings that were different was a weird design choice, and I would love to see keybinding "profiles" enabled on Marimo that let me quickly switch them out to be Jupyter-compatible. Specifically, the ones I really want to have are:<ol>
<li><code>Esc+a</code>/<code>Esc+b</code> to quickly switch from cell editing mode to cell selection mode, and then to add above/below current cell,</li>
<li><code>Enter</code> to go from cell selection mode to cell editing mode,</li>
<li><code>Ctrl+Enter</code> to execute a cell,</li>
<li><code>Cmd+I</code> or <code>Cmd+K</code> to reveal the prompt for cell generation mode with AI,</li>
</ol>
</li>
<li>Reactive execution takes some time to get used to, but once you do, you'll never want to work without it. It's a bit like AI-assisted coding at this point.</li>
<li>AI-assistance requires you to decide whether to pass in the whole notebook as context or not. I think it should be turned on by default.</li>
<li>Marimo has a UI builder built-in, which is nice, but is a bit clunky to get used to. Perhaps it's because I'm not used to building UIs, and prefer building CLIs. I can definitely see others finding it to be a wholesome front-end solution though. It's nice to have the toolkit built into the notebook system.</li>
</ol>

    </span>

    
    
    
    
    

    <hr>

    <i>Cite this blog post:</i>
    <div class="hll" style="position: relative;">
    <button class="copy-button" onclick="copyCitation()" title="Copy citation">
      <span class="copy-icon">ðŸ“‹</span>
    </button>
    <pre>
<span id="citation-text"><span><span style="color: darkblue; font-weight: bold">@article</span>{
    <span style="color: black; font-weight: bold">ericmjl-2025-wow-marimo</span>,
    <span style="color: green; font-weight:bold">author</span> = <span style="color: maroon">{Eric J. Ma}</span>,
    <span style="color: green; font-weight:bold">title</span> = <span style="color: maroon">{Wow, Marimo!}</span>,
    <span style="color: green; font-weight:bold">year</span> = <span style="color: maroon">{2025}</span>,
    <span style="color: green; font-weight:bold">month</span> = <span style="color: maroon">{04}</span>,
    <span style="color: green; font-weight:bold">day</span> = <span style="color: maroon">{08}</span>,
    <span style="color: green; font-weight:bold">howpublished</span> = <span style="color: maroon">{\url{https://ericmjl.github.io}}</span>,
    <span style="color: green; font-weight:bold">journal</span> = <span style="color: maroon">{Eric J. Ma's Blog}</span>,
    <span style="color: green; font-weight:bold">url</span> = <span style="color: maroon">{https://ericmjl.github.io/blog/2025/4/8/wow-marimo}</span>,
}
  </span></pre>
    </div>

    <script>
    function copyCitation() {
      const citationElement = document.getElementById('citation-text');
      const text = citationElement.textContent;

      // Create a temporary textarea element
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);

      // Select and copy the text
      textarea.select();
      document.execCommand('copy');

      // Remove the temporary textarea
      document.body.removeChild(textarea);

      // Visual feedback
      const button = document.querySelector('.copy-button');
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="copy-icon">âœ“</span>';
      button.style.backgroundColor = '#4CAF50';

      // Reset button after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.backgroundColor = '';
      }, 2000);
    }
    </script>

    <style>
    .copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: transparent;
      color: #666;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      z-index: 1;
    }

    .copy-button:hover {
      background-color: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    .copy-icon {
      font-size: 14px;
    }
    </style>
    <hr>
    <p>
      <i>I send out a newsletter with tips and tools
        for data scientists. Come check it out at
        <a href="https://dspn.substack.com">Substack</a>.</i>
    </p>
    <p>
      <i><span>If you would like to sponsor the coffee that goes into making my posts,
        please consider </span>
        <a href="https://github.com/sponsors/ericmjl">GitHub Sponsors</a>!</i>
    </p>
    <p>
      <i><span>Finally, I do free 30-minute GenAI strategy calls for teams
        that are looking to leverage GenAI for maximum impact. Consider </span>
        <a href="https://calendly.com/ericmjl/llm-chat">booking a call on Calendly</a>
        if you're interested!</i>
      </i>
    </p>
  </div>
  <div class="giscus" id="giscus-container"></div>
  <script>
    // Determine theme from localStorage or fallback to light
    var theme = localStorage.getItem('theme') === 'dark' ? 'dark' : 'light';
    var giscusScript = document.createElement('script');
    giscusScript.src = 'https://giscus.app/client.js';
    giscusScript.setAttribute('data-repo', 'ericmjl/website');
    giscusScript.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnk2MDIzMzAxNg==');
    giscusScript.setAttribute('data-category', 'Comments');
    giscusScript.setAttribute('data-category-id', 'DIC_kwDOA5cVOM4Crqx4');
    giscusScript.setAttribute('data-mapping', 'pathname');
    giscusScript.setAttribute('data-strict', '1');
    giscusScript.setAttribute('data-reactions-enabled', '1');
    giscusScript.setAttribute('data-emit-metadata', '0');
    giscusScript.setAttribute('data-input-position', 'top');
    giscusScript.setAttribute('data-theme', theme);
    giscusScript.setAttribute('data-lang', 'en');
    giscusScript.crossOrigin = 'anonymous';
    giscusScript.async = true;
    document.getElementById('giscus-container').appendChild(giscusScript);
  </script>
</div>



        </div>

        <!-- Bottom Navigation (external links) -->
        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/resume" rel="">
                            Resume</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.linkedin.com/in/ericmjl" rel="">
                            LinkedIn</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="http://github.com/ericmjl" rel="">
                            GitHub</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl--shortmail-run-app.modal.run/send/cce87ae9c1d7" rel="">
                            Contact Me</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/blog.xml" rel="">
                            Blog RSS</a>
                    </li>
                    
                </ul>
            </nav>
        </div>

    </div>

    <script>
        // Theme toggle functionality
        function setGiscusTheme(theme) {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (!iframe) return;
            iframe.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme
                        }
                    }
                },
                'https://giscus.app'
            );
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');

            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                themeToggle.textContent = 'ðŸŒ™';
                localStorage.setItem('theme', 'light');
                setGiscusTheme('light');
            } else {
                body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
                setGiscusTheme('dark');
            }
        }

        // Check for saved theme preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');

            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
                setTimeout(() => setGiscusTheme('dark'), 500);
            } else {
                setTimeout(() => setGiscusTheme('light'), 500);
            }
        });
    </script>

    <!-- Search functionality -->
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="/static/js/search.js"></script>
</body>
