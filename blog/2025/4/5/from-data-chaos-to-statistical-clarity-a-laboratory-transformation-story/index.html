<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode .terminal {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode a {
            color: #66b3ff;
        }

        body.dark-mode .terminal-menu {
            background-color: #1a1a1a;
        }

        body.dark-mode .terminal-menu li a {
            color: #ffffff;
        }

        body.dark-mode .terminal-menu li a:hover {
            background-color: #333333;
        }

        /* Theme toggle button styles */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
        }

        body.dark-mode .theme-toggle {
            background-color: #333;
            color: #fff;
            border-color: #666;
        }

        .container {
            position: relative;
        }
    </style>
    
<!-- Syntax Highlighter. Use pygments. -->
<link rel="stylesheet" href="../../../../../static/pygments.css">


    

<meta property="og:title" content="From data chaos to statistical clarity: A laboratory transformation story">
<meta property='og:url' content='http://ericmjl.github.io/blog//blog/from-data-chaos-to-statistical-clarity-a-laboratory-transformation-story' />



    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-12498603-2', 'auto');
        ga('send', 'pageview');
    </script>

    <link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.2/dist/terminal.min.css" />
    <link rel="stylesheet" href="/static/css/custom.css" />

    <style>
        .blog-card-container {
            display: flex;
        }

        .blog-card-left {
            flex: 1;
        }

        .blog-card-right {
            flex: 3;
        }

        /* Add rounded corners to banner images */
        .banner-image {
            border-radius: 8px;
            max-width: 98%;
            height: auto;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

    </style>
    <!-- Mathjax -->
    <!-- <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
        </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script> -->

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
        </script>

    <!-- Mermaid.js -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            securityLevel: 'loose'
        });
    </script>
    <style>
        .mermaid {
            background-color: white;
            padding: 1em;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>

</head>

<title>From data chaos to statistical clarity: A laboratory transformation story - Eric J. Ma's Personal Site</title>

<body>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
        <h1 class="logo">
            <a href="/">
                Eric J Ma's Website
            </a>
        </h1>
        <!-- Top Navigation (local links) -->

        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/" rel="">Home</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a class="terminal-prompt" href="/blog" rel="">Blog</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/books" rel="">Books</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/open-source" rel="">Open Source</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/projects" rel="">Projects</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/talks" rel="">Talks</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/teaching" rel="">Teaching</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/user-manual" rel="">User Manual</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/bio" rel="">Bio</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>

        <!-- Body -->
        <div id="body">
            


<div class="terminal-card">
  <header id="post_title" name="post_title">
<!-- Set title style -->
<span name="title" id="title">From data chaos to statistical clarity: A laboratory transformation story</span>
</header>
  <div class="card-body">
    
<!-- Append author -->
<small>
  <p>
    written by
    
    <a class="author" href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on
    <span id="pub_date" name="pub_date">2025-04-05</span>

    
    | tags:
    <!-- Append tags after author -->
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/automation/">
        automation
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/bayesian estimation/">
        bayesian estimation
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/robust estimation/">
        robust estimation
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/r2d2/">
        r2d2
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/experiment design/">
        experiment design
      </a>
    </span>
    
  </p>
  
</small>

    <hr>

    
    
    <img src="logo.webp" class="banner-image" >
    

    <!-- NOTE: I am keeping this here just for preview purposes.
     We must rely on the webp logo for the blog post.
     Pre-commit hooks will ensure that the png logo is converted to webp.-->
    

    
    <div class="blog-summary">
      <i><p>A high-throughput screening lab transforms their data analysis workflow by applying statistical thinking from the start. By combining robust estimation with R2D2 priors, they eliminate tedious manual data cleaning, automatically handle outliers, decompose sources of variation, and objectively measure both statistical estimation model and laboratory quality performance. This story demonstrates how thoughtful experimental design paired with principled statistical methods can dramatically improve both efficiency and scientific quality. How might statistical thinking transform your experimental workflow?</p>
</i>
    </div>
    

    <span id="post_body" name="post_body">
      <h2 id="the-breaking-point">The Breaking Point</h2><p>Dr. Chen's team was drowning in spreadsheets. Again.</p>
<p>"I don't understand why these position effects keep showing up," muttered Li, the senior scientist, as she manually flagged another set of outlier wells on their latest assay. "We're spending more time cleaning data than running experiments."</p>
<p>Their high-throughput screening lab had followed the same workflow for years: carefully plan the biological aspects, run plate-based assays, then spend days wrestling with the resulting data before any actual analysis could begin.</p>
<p>"Remember when that vendor rep insisted we put all our controls in column 1?" remarked Jamal, gesturing to their plate layout diagram. "Said their software couldn't handle distributed controls?"</p>
<p>The team nodded grimly. That single decision had cascaded into countless hours of manual data correction as edge effects and position-dependent variations routinely skewed their results. Their analysis scripts had evolved into a jungle of if-else statements attempting to address every new edge case.</p>
<p>When they approached the research digital team about automating their analysis pipeline, the response was disheartening but predictable.</p>
<p>"This can't be automated reliably," Maya, the team's embedded data scientist from the research digital team, explained. "There are too many subjective decisions buried in your process. We'd just be encoding your workarounds, not solving the actual problems."</p>
<h2 id="the-turning-point">The Turning Point</h2><p>The breakthrough came during a seminar on Bayesian statistics. Dr. Chen realized their problem wasn't poor analysis—it was addressing experimental design flaws after data collection instead of preventing them from the start.</p>
<p>"What if we completely reimagined our workflow?" he proposed at the next team meeting. "Rather than retrofitting solutions to poorly designed experiments, we could address these problems before they occur."</p>
<p>The team was skeptical. Their current approach, despite its flaws, was familiar. But the hours spent manually curating data had become unsustainable, and they knew something had to change.</p>
<p>Dr. Chen decided to reach out to Maya again. "I know you said our current workflow can't be reliably automated," he explained, "but we're ready to rebuild from the ground up. Would you consider working more closely with us?"</p>
<p>Maya hesitated. "What's different this time?"</p>
<p>"We're not trying to automate our existing process anymore," Dr. Chen explained. "We want to redesign our experiments with statistical principles from the start."</p>
<p>Maya's expression changed. As a data scientist, she'd spent years trying to salvage analyses from poorly designed experiments. The opportunity to shape the experimental design itself was rare.</p>
<p>"That changes everything," she said, nodding slowly. "If you're willing to rethink your plate layouts and measurement protocols based on statistical considerations... I'm in."</p>
<p>Maya agreed, intrigued by the opportunity to apply statistical principles from the beginning rather than patching an existing system.</p>
<h2 id="rebuilding-from-first-principles">Rebuilding From First Principles</h2><p>Their transformation began with mapping the sources of variation in their experiments:</p>
<p>First, they tackled the position effects problem. Against the vendor's recommendations, they designed a distributed control system, placing reference samples strategically throughout each plate rather than restricting them to dedicated columns.</p>
<p>"But the software can't handle this layout," protested Li, recalling the vendor's warning.</p>
<p>"Then we'll write our own analysis scripts," Dr. Chen countered. "One that treats position effects as systematically measurable phenomena rather than nuisance variables."</p>
<p>They ran several plates with only control samples to create a detailed map of well position biases. The results were striking.</p>
<p>"Look at this heatmap," Maya pointed out during their analysis review. "It's not just the column 1 effect we've been fighting. The entire plate edge shows elevated values compared to the center wells."</p>
<p><img src="plate-effects.webp" alt="Heatmap showing plate position effects with elevated values (darker purple) around the edges and lower values (yellow/green) in the center of the 96-well plate"></p>
<p>"The edge wells are consistently showing higher values," Dr. Chen observed, tracing the dark purple regions along the perimeter of the plate. "And it's not uniform—some corners are worse than others."</p>
<p>This visualization became the foundation for a hierarchical Bayesian model that could account for position-specific variation while maximizing plate space for test samples.</p>
<p>"Now we can quantify and correct for these position effects systematically," Maya explained. "Rather than manually flagging outliers, we're modeling the actual physical phenomena causing the variation."</p>
<p>Next, they addressed their outlier problem. Instead of manually flagging extreme values—a process fraught with subjectivity—they needed a more principled approach.</p>
<p>"I've been reading about robust statistical methods," Jamal shared during a team meeting. "What if we use t-distributed rather than Gaussian residuals in our model?"</p>
<p>He pulled up a figure from a Bayesian statistics handbook. "Look at this comparison between standard Gaussian regression and robust regression using Student-t likelihood."</p>
<p><img src="robust-regression.webp" alt="Comparison of Gaussian vs. robust Student-t regression showing how outliers (red X marks) severely skew the Gaussian fit (yellow dashed line) while the robust fit (solid orange line) maintains the true trend"></p>
<p>"See how the outliers—these red X marks—pull the standard regression line way off?" Jamal explained. "But the robust approach stays true to the actual trend. We could apply this same principle to our plate data."</p>
<p>"So the model effectively down-weights outliers based on their probability," Dr. Chen summarized, "which means we don't have to manually decide what's an outlier anymore."</p>
<p>"Exactly," Jamal nodded. "The heavier tails of the t-distribution naturally accommodate occasional extreme values."</p>
<p>It was a few weeks later that Maya made another crucial contribution. After attending a computational statistics conference, she returned excited about a novel approach.</p>
<p>"I just learned about something called the R2D2 prior," she announced during their weekly meeting. "It could be perfect for our situation and would complement the robust estimation approach Jamal introduced."</p>
<p>The team looked at her blankly.</p>
<p>"R2-D2? Like the Star Wars robot?" asked Li with a skeptical smile.</p>
<p>Maya laughed. "R2D2 stands for 'R-squared Dirichlet Distribution.' It's a statistical prior that could elegantly solve several of our problems at once."</p>
<p>"Is there a practical implementation?" Jamal asked. "Or is this just theoretical?"</p>
<p>"Actually, I found a great implementation in PyMC," Maya replied, pulling up her laptop. "There's even a detailed tutorial online about using it for protein screening experiments - very similar to our work. I can share <a href="../../3/bayesian-superiority-estimation-with-r2d2-priors-a-practical-guide-for-protein-screening/">the link</a> with everyone."</p>
<p>She explained how the R2D2 prior could be combined with their robust estimation approach to yield three major benefits:</p>
<p>"First, while Jamal's t-distribution handles outliers in the measurements themselves, the R2D2 prior works on a different level - it provides a principled way to model the variances in our system," Maya explained, sketching a diagram on the whiteboard. "Second, R2D2 provides automatic variance decomposition, which means we can quantify how much variation comes from different sources—plate position, reagent batch, technician, or true biological signal."</p>
<p><img src="team-meeting.webp" alt="AI-generated photo of Maya explaining the R2D2 prior to the team"></p>
<p><em>AI-generated photo of Maya explaining the R2D2 prior to the team, with Dr. Chen sneaking a glance at the photographer.</em></p>
<p>"And the third benefit?" Dr. Chen asked.</p>
<p>"It gives us a built-in measure of model performance," Maya replied. "We can objectively evaluate how well our statistical approach is working without circular reasoning."</p>
<p>"So the t-distribution and R2D2 prior are complementary?" Jamal asked.</p>
<p>"Exactly," Maya nodded. "The t-distribution makes our model robust against outliers in individual measurements, while the R2D2 prior helps us understand and decompose the sources of variation across the entire experiment. Together, they give us a complete statistical framework."</p>
<p>The team was intrigued but cautious. "This sounds promising, but will it actually work with our messy biological data?" Jamal asked.</p>
<p>"Let's find out," Maya suggested. "I can implement a prototype using our control plate data."</p>
<p>Maya spent several days meticulously analyzing their historical data, cataloging the different patterns of outliers and position effects that had appeared over the past year.</p>
<p>"I want to make sure our model accounts for all the edge cases we've seen before," she explained to the team. "If we build it right the first time, we won't need to keep patching it later."</p>
<p>Her careful preparation paid off. When she finally implemented the initial model combining the t-distribution likelihood with the R2D2 prior, it captured nearly all the patterns they'd observed in their historical data. The statistical framework was sound from the start.</p>
<p>"The model looks great conceptually," Jamal observed as they reviewed the first results. "But it's taking almost an hour to run for a single plate."</p>
<p>Maya nodded. "The computational efficiency needs work, but the statistical model itself is solid. We're already capturing the position effects and handling outliers correctly." She made a few targeted optimizations to the sampling approach, preserving the core statistical properties while dramatically reducing computation time.</p>
<p>There were adjustments needed on the experimental side too. Lab technicians accustomed to the old workflow initially questioned the more distributed control layout. "It feels wrong to put controls in the middle of the plate," one technician admitted. But as they saw the resulting data quality improvements, skepticism quickly gave way to enthusiasm.</p>
<h2 id="the-payoff-efficiency-fidelity-automation">The Payoff: Efficiency, Fidelity, Automation</h2><p>Six months after implementing their new approach, the transformation was undeniable.</p>
<p>"I haven't manually excluded a well in weeks," Li remarked during their progress meeting. What once required hours of subjective decision-making now happened automatically through their robust statistical framework.</p>
<p>The robust R2D2 model had delivered on its promise. Outliers were now handled systematically rather than subjectively. The variance decomposition revealed that nearly 30% of their measurement variation came from plate position effects - knowledge that helped them further refine their experimental design.</p>
<p>Perhaps most surprisingly, the model performance metrics highlighted which assays were most reliable and which needed further optimization. This led to targeted improvements in their least robust protocols.</p>
<p>Their analysis pipeline ran without manual intervention, eliminating tedious data cleaning sessions. Scientists were freed to focus on interpretation rather than data wrangling. Reproducibility improved dramatically when analysis decisions were encoded in statistical models rather than arising from individual choices.</p>
<p>Maya, initially hesitant to automate their process, was now a regular collaborator. "This is exactly how statistical methods should be applied," she told Dr. Chen. "Built into the experimental design from day one, not tacked on as an afterthought."</p>
<p>The resulting system preserved hierarchical relationships between samples and maintained proper uncertainty quantification throughout.</p>
<h2 id="lessons-from-their-journey">Lessons From Their Journey</h2><p>Looking back, Dr. Chen's team realized their most powerful statistical tool wasn't sophisticated software or advanced algorithms—it was thoughtful experimental design from the very beginning, combined with principled statistical methods like the R2D2 prior.</p>
<p>By anticipating sources of variation upfront and building robust statistical approaches, they had not only saved countless hours but had fundamentally improved the quality of their science.</p>
<p>Their experience demonstrates a powerful truth: experiments designed with analysis in mind produce cleaner data from the start. The extra effort at the bench, coupled with the right statistical framework, translated to exponential savings throughout the data lifecycle.</p>
<p>For research teams facing similar challenges, the lesson is clear—statistical thinking should inform your initial experimental approach rather than serving as an afterthought. Your future self will thank you for the foresight!</p>

    </span>

    
    
    
    
    

    <hr>

    <i>Cite this blog post:</i>
    <div class="hll" style="position: relative;">
    <button class="copy-button" onclick="copyCitation()" title="Copy citation">
      <span class="copy-icon">📋</span>
    </button>
    <pre>
<span id="citation-text"><span><span style="color: darkblue; font-weight: bold">@article</span>{
    <span style="color: black; font-weight: bold">ericmjl-2025-from-data-chaos-to-statistical-clarity-a-laboratory-transformation-story</span>,
    <span style="color: green; font-weight:bold">author</span> = <span style="color: maroon">{Eric J. Ma}</span>,
    <span style="color: green; font-weight:bold">title</span> = <span style="color: maroon">{From data chaos to statistical clarity: A laboratory transformation story}</span>,
    <span style="color: green; font-weight:bold">year</span> = <span style="color: maroon">{2025}</span>,
    <span style="color: green; font-weight:bold">month</span> = <span style="color: maroon">{04}</span>,
    <span style="color: green; font-weight:bold">day</span> = <span style="color: maroon">{05}</span>,
    <span style="color: green; font-weight:bold">howpublished</span> = <span style="color: maroon">{\url{https://ericmjl.github.io}}</span>,
    <span style="color: green; font-weight:bold">journal</span> = <span style="color: maroon">{Eric J. Ma's Blog}</span>,
    <span style="color: green; font-weight:bold">url</span> = <span style="color: maroon">{https://ericmjl.github.io/blog/2025/4/5/from-data-chaos-to-statistical-clarity-a-laboratory-transformation-story}</span>,
}
  </span></pre>
    </div>

    <script>
    function copyCitation() {
      const citationElement = document.getElementById('citation-text');
      const text = citationElement.textContent;

      // Create a temporary textarea element
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);

      // Select and copy the text
      textarea.select();
      document.execCommand('copy');

      // Remove the temporary textarea
      document.body.removeChild(textarea);

      // Visual feedback
      const button = document.querySelector('.copy-button');
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="copy-icon">✓</span>';
      button.style.backgroundColor = '#4CAF50';

      // Reset button after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.backgroundColor = '';
      }, 2000);
    }
    </script>

    <style>
    .copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: transparent;
      color: #666;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      z-index: 1;
    }

    .copy-button:hover {
      background-color: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    .copy-icon {
      font-size: 14px;
    }
    </style>
    <hr>
    <p>
      <i>I send out a newsletter with tips and tools
        for data scientists. Come check it out at
        <a href="https://dspn.substack.com">Substack</a>.</i>
    </p>
    <p>
      <i><span>If you would like to sponsor the coffee that goes into making my posts,
        please consider </span>
        <a href="https://github.com/sponsors/ericmjl">GitHub Sponsors</a>!</i>
    </p>
    <p>
      <i><span>Finally, I do free 30-minute GenAI strategy calls for teams
        that are looking to leverage GenAI for maximum impact. Consider </span>
        <a href="https://calendly.com/ericmjl/llm-chat">booking a call on Calendly</a>
        if you're interested!</i>
      </i>
    </p>
  </div>
  <div class="giscus" id="giscus-container"></div>
  <script>
    // Determine theme from localStorage or fallback to light
    var theme = localStorage.getItem('theme') === 'dark' ? 'dark' : 'light';
    var giscusScript = document.createElement('script');
    giscusScript.src = 'https://giscus.app/client.js';
    giscusScript.setAttribute('data-repo', 'ericmjl/website');
    giscusScript.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnk2MDIzMzAxNg==');
    giscusScript.setAttribute('data-category', 'Comments');
    giscusScript.setAttribute('data-category-id', 'DIC_kwDOA5cVOM4Crqx4');
    giscusScript.setAttribute('data-mapping', 'pathname');
    giscusScript.setAttribute('data-strict', '1');
    giscusScript.setAttribute('data-reactions-enabled', '1');
    giscusScript.setAttribute('data-emit-metadata', '0');
    giscusScript.setAttribute('data-input-position', 'top');
    giscusScript.setAttribute('data-theme', theme);
    giscusScript.setAttribute('data-lang', 'en');
    giscusScript.crossOrigin = 'anonymous';
    giscusScript.async = true;
    document.getElementById('giscus-container').appendChild(giscusScript);
  </script>
</div>



        </div>

        <!-- Bottom Navigation (external links) -->
        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/resume" rel="">
                            Resume</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.linkedin.com/in/ericmjl" rel="">
                            LinkedIn</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="http://github.com/ericmjl" rel="">
                            GitHub</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl--shortmail-run-app.modal.run/send/cce87ae9c1d7" rel="">
                            Contact Me</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/blog.xml" rel="">
                            Blog RSS</a>
                    </li>
                    
                </ul>
            </nav>
        </div>

    </div>

    <script>
        // Theme toggle functionality
        function setGiscusTheme(theme) {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (!iframe) return;
            iframe.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme
                        }
                    }
                },
                'https://giscus.app'
            );
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');

            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
                localStorage.setItem('theme', 'light');
                setGiscusTheme('light');
            } else {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
                setGiscusTheme('dark');
            }
        }

        // Check for saved theme preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');

            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                setTimeout(() => setGiscusTheme('dark'), 500);
            } else {
                setTimeout(() => setGiscusTheme('light'), 500);
            }
        });
    </script>
</body>
