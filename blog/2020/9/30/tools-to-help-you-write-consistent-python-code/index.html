<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode .terminal {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        body.dark-mode a {
            color: #66b3ff;
        }

        body.dark-mode .terminal-menu {
            background-color: #1a1a1a;
        }

        body.dark-mode .terminal-menu li a {
            color: #ffffff;
        }

        body.dark-mode .terminal-menu li a:hover {
            background-color: #333333;
        }

        /* Theme toggle button styles */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
        }

        body.dark-mode .theme-toggle {
            background-color: #333;
            color: #fff;
            border-color: #666;
        }

        .container {
            position: relative;
        }
    </style>
    
<!-- Syntax Highlighter. Use pygments. -->
<link rel="stylesheet" href="../../../../../static/pygments.css">


    

<meta property="og:title" content="Tools to help you write consistent Python code">
<meta property='og:url' content='http://ericmjl.github.io/blog//blog/tools-to-help-you-write-consistent-python-code' />



    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-12498603-2', 'auto');
        ga('send', 'pageview');
    </script>

    <link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.2/dist/terminal.min.css" />
    <link rel="stylesheet" href="/static/css/custom.css" />

    <style>
        .blog-card-container {
            display: flex;
        }

        .blog-card-left {
            flex: 1;
        }

        .blog-card-right {
            flex: 3;
        }

        /* Add rounded corners to banner images */
        .banner-image {
            border-radius: 8px;
            max-width: 98%;
            height: auto;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

    </style>
    <!-- Mathjax -->
    <!-- <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
        </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script> -->

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
        </script>

    <!-- Mermaid.js -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            securityLevel: 'loose'
        });
    </script>
    <style>
        .mermaid {
            background-color: white;
            padding: 1em;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>

</head>

<title>Tools to help you write consistent Python code - Eric J. Ma's Personal Site</title>

<body>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
        <h1 class="logo">
            <a href="/">
                Eric J Ma's Website
            </a>
        </h1>
        <!-- Top Navigation (local links) -->

        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/" rel="">Home</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a class="terminal-prompt" href="/blog" rel="">Blog</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/books" rel="">Books</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/open-source" rel="">Open Source</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/projects" rel="">Projects</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/talks" rel="">Talks</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/teaching" rel="">Teaching</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/user-manual" rel="">User Manual</a>
                        
                    </li>
                    
                    <li class="menu-item">
                        <!-- Set blinking cursor correctly on navigation -->
                        
                        
                        
                        
                        
                        <a href="/bio" rel="">Bio</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>

        <!-- Body -->
        <div id="body">
            


<div class="terminal-card">
  <header id="post_title" name="post_title">
<!-- Set title style -->
<span name="title" id="title">Tools to help you write consistent Python code</span>
</header>
  <div class="card-body">
    
<!-- Append author -->
<small>
  <p>
    written by
    
    <a class="author" href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on
    <span id="pub_date" name="pub_date">2020-09-30</span>

    
    | tags:
    <!-- Append tags after author -->
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/data science/">
        data science
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/tips and tricks/">
        tips and tricks
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/programming/">
        programming
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/python/">
        python
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/command line tools/">
        command line tools
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/code formatting/">
        code formatting
      </a>
    </span>
    <span class="boxed" id="tags" name="tags">
      <a class="tags" href="../../../../tag/code style/">
        code style
      </a>
    </span>
    
  </p>
  
</small>

    <hr>

    

    <!-- NOTE: I am keeping this here just for preview purposes.
     We must rely on the webp logo for the blog post.
     Pre-commit hooks will ensure that the png logo is converted to webp.-->
    

    
    <div class="blog-summary">
      <i><p>How do you write clean Python code in the year 2020? Check out this latest essay I wrote. Cross-posted from my <a href="http://ericmjl.github.io/essays-on-data-science/">essays collection</a>.</p>
</i>
    </div>
    

    <span id="post_body" name="post_body">
      <p>As a data scientist, you might be feeling the need to level-up your code-writing skills.
After all, if your hacked together script becomes the basis of production systems, imagine the headache :).
Moreover, as time goes by, it seems to me that for data scientists to uncover the high risk,
but nonetheless potentially high value and high impact outlets,
nothing beats having software skills to flexibly express the custom logic that's needed.
Hadley Wickham's sentiment that <a href="https://youtu.be/cpbtcsGE0OA">one can't do data science in a GUI</a> seems to ring true,
though I'd probably refine it by saying that one can't do <em>highest value</em> data science without programming skills!</p>
<p>Mostly because of the community of <a href="https://github.com/ericmjl/pyjanitor"><code>pyjanitor</code></a> developers,
who encounter a smattering of tooling that I might not have,
I have had the privilege of learning from them a collection of tooling
that I think can really help with code style.
Especially if you transition your code from a Jupyter notebook to a <code>.py</code> source file!
Equipped with the right tools,
you can write consistent code without needing to memorize all of the rules.
And that idea of externalizing the rules to a program is what these tools are all about!</p>
<h2 id="tl-dr-what-tools-are-there">tl;dr: What tools are there?</h2><p>For the impatient, here's the summary:</p>
<h3 id="code-formatters">Code formatters</h3><p>i.e. those that explicitly change your code:</p>
<ul>
<li>Black</li>
<li>isort</li>
</ul>
<h3 id="code-linters">Code linters</h3><p>i.e. those that <em>don’t</em> change your code, but flag errors:</p>
<ul>
<li>Flake8</li>
<li>Interrogate</li>
<li>Darglint</li>
<li>pylint</li>
<li>mypy</li>
</ul>
<p>Some of these come with <code>pre-commit hooks</code>, which I strongly suggest you use!</p>
<h3 id="vscode-tooling">VSCode tooling</h3><p>VSCode tooling for those who are used to VSCode as your development environment:</p>
<ul>
<li>Python extension</li>
<li>pylance: this is superbly fast. hats off, Microsoft.</li>
</ul>
<h3 id="external-ci-services">External CI services</h3><p>Tools that run as an external service for your continuous integration pipeline:</p>
<ul>
<li>deepsource</li>
</ul>
<h2 id="thats-a-lot-of-tools-how-do-i-interact-them">That’s a lot of tools; how do I interact them?</h2><p>A full-fledged tutorial is probably not the realm of this tiny blog post,
but I will begin by giving you the overview of how you interact with them in general.
That should give you enough patterns to work with when you look at their docs.</p>
<h3 id="at-the-cli">At the CLI</h3><p>The code formatters and linters are runnable at the CLI.
You can consider this to be the lowest-level/primitive way of using them.
For example, with <code>black</code>, you would call on it at the command line at the root of your project repository:</p>
<div class="hll"><pre><span></span>black<span class="w"> </span>.
</pre></div>
<p>What pops out is Black telling you what files it formatted, or error messages telling you which files it couldn’t format.</p>
<p>Likewise for <code>flake8</code>:</p>
<div class="hll"><pre><span></span>flake8<span class="w"> </span>.
</pre></div>
<p>What pops out is an entire collection of "error codes", which specify one and only one error that it caught.
The error messages will tell you what’s <em>wrong</em>, so correcting the error is a matter of doing the opposite.
For example, <code>flake8</code> might tell me that a line is too long at 89 characters,
which is greater than the 79 that it is configured for,
and so I would have to split up that line,
or if it’s a string then remove unnecessary words, to correct the error.</p>
<h3 id="configuration">Configuration</h3><p>Sometimes, two tools might come with defaults that conflict with one another.
<code>flake8</code> and <code>black</code> are two;
<code>black</code>, being opinionated, will format lines to fit in 88 characters,
but <code>flake8</code> will by default look for 79 characters.
(I’m in favour of 79,
because it allows me to look at my code in its entirety side-by-side on a 15" MacBook Pro.)</p>
<p>Each tool comes with its own configuration documentation page.
The Python community has started gravitating towards
a config file called <a href="https://snarky.ca/what-the-heck-is-pyproject-toml/"><code>pyproject.toml</code></a>,
which is intended for Python language tools.
If <code>pyproject.toml</code> is supported by a tool,
then you should be able to find a page in the documentation.
A well-written docs page will give you a copy/paste-able config file
with extensive comments that you can read to know what’s going on.
(Black itself leads the charge:
its <a href="https://black.readthedocs.io/en/stable/pyproject_toml.html">page on the <code>pyproject.toml</code> file</a>
is very well-documented!)</p>
<p>I think that the community-wide standardization is a great thing!
The way this has happened is a bit slow,
but at least the tool authors don’t make it <em>onerous</em> to migrate from existing config files.
Fits all of the right patterns: make doing the right thing easy!</p>
<h3 id="inside-vscode">Inside VSCode</h3><p>If you use VSCode as your day-to-day integrated development environment (or IDE),
there are two extensions that are indispensable for Python developers:
<a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">the official Python extension</a>
and <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance">Pylance</a>.
The official Python extension adds support for:</p>
<blockquote><p>IntelliSense, linting, debugging, code navigation, code formatting,
Jupyter notebook support, refactoring, variable explorer,
test explorer, snippets, and more!</p>
</blockquote>
<p>Pylance, on the other hand, is:</p>
<blockquote><p>powered by Pyright, Microsoft's static type checking tool.
Using Pyright, Pylance has the ability to supercharge
your Python IntelliSense experience with rich type information,
helping you write better code faster.</p>
</blockquote>
<p>With code linting enabled in VSCode, you get the benefits of errors showing up as you type.
An example from the <code>pyjanitor</code> library,
which contains some holdover code style issues from before the time I was proficient in these tools,
can be seen in the screenshot below.</p>
<p><img src="pylance-screenshot.webp" alt=""></p>
<p>Underneath the hood, for code style checking,
both extensions call out to <code>flake8</code>, <code>black</code>, <code>mypy</code>
and other tools to perform code checking,
and this is configurable in VSCode itself.</p>
<h3 id="inside-your-ci-system">Inside your CI system</h3><p>If you build a project and have a continuous integration system for it,
you can continuously check your code using the CLI tools.
Concpetually, the steps you'd follow are:</p>
<ol>
<li>Install the tools inside the CI environment at build time.</li>
<li>Place in the right configuration files in your project root.</li>
<li>Execute the tools in the testing section of your CI build.</li>
</ol>
<p>The <a href="https://github.com/ericmjl/pyjanitor/blob/dev/.azure-pipelines/templates/run-tests.yml"><code>pyjanitor</code> Azure pipelines CI</a>
has a great example of this in action.
I'd recommend putting these early on,
as waiting for test to pass
before catching these <em>slightly</em> more trivial problems
can make for a <em>slightly</em> irritated developer 😅.</p>
<p>Because we're talking about CI systems,
we might as well also talk about the external CI service highlighted here, DeepSource.
It's a commercial service that is free for open source projects,
and in there I've gotten a few reminders on certain anti-patterns.
I like what they're doing; the team does have to make a living,
so I'm not opposed to the commercialization of their tool,
and in fact I'm quite appreciative of the fact
that they've made it freely accessible for OSS projects.</p>
<h3 id="what-about-inside-jupyter-notebooks">What about inside Jupyter notebooks?</h3><p>Most of us who are data scientists spend a majority of our time inside Jupyter notebooks.
Are there tools available for us to help us write good code inside notebooks?</p>
<p>Turns out, there's quite a few projects that try to do this!
Given the breadth of people who know how to use Python to do things,
it never seems far-fetched to think that
someone else who has a need to scratch has already figured this out.</p>
<p>Through digging around on the internet,
I found at least the following tools that could be promising:</p>
<ul>
<li><a href="https://pypi.org/project/black-nb/"><code>black-nb</code></a></li>
<li><a href="https://pypi.org/project/nb-black/"><code>nb_black</code></a></li>
<li><a href="https://github.com/drillan/jupyter-black"><code>jupyter-black</code></a></li>
</ul>
<p>That said, I usually adhere to the following principle with notebooks:
that they are intended to be both read <em>and</em> executed,
meaning if you have long walls of code inside your notebook,
they should be refactored out into a custom package
to keep the storytelling logic of your notebook flowing nicely.
That is when using an IDE can help you.
If your intent with <code>black</code>-ifying notebooks is to avoid refactoring your code,
then you'll be disappointed - <code>black</code> has a tendency to add lines to code,
such as hard-coded lists that are unavoidably long.
<code>black</code>-ifying your notebook code may thus have
unintended consequences for readability!</p>
<p>Instead, do the right thing:
<a href="https://ericmjl.github.io/essays-on-data-science/software-skills/refactoring/">Refactor your code!</a>!
To learn how to break out custom code,
<a href="https://godatadriven.com/blog/write-less-terrible-code-with-jupyter-notebook/">check out this very well-written blog post</a>!</p>
<h2 id="help-me-take-action-what-should-i-do-next">Help me take action! What should I do next?</h2><p>Here's the next thing you can do:
add these tools into your <code>environment.yml</code> (conda users)
or <code>requirements.txt</code> (venv/pip-only users) files!
Then, update your virtual environment.
Voilà!
You now have these tools in your environment,
and can start checking your code style!</p>
<p>(Not using environments?
I won't judge you 😅, but I would <em>strongly encourage</em> that you do so!
<a href="https://ericmjl.github.io/blog/2018/12/25/conda-hacks-for-data-science-efficiency/">Here's some tips to help</a>.)</p>
<h2 id="conclusions">Conclusions</h2><p>Hopefully this short essay has helped you get familiar with
some of the tooling to help you write consistently-styled code
that is also readable by a large swathe of the Python-writing universe of programmers.
Writing code in a consistent style is important.
That style usually involves rules;
having tools to externalize that style,
such you don't have to worry about remembering it,
helps us conform to that style more easily.
Have fun writing clean code!</p>

    </span>

    
    
    
    
    

    <hr>

    <i>Cite this blog post:</i>
    <div class="hll" style="position: relative;">
    <button class="copy-button" onclick="copyCitation()" title="Copy citation">
      <span class="copy-icon">📋</span>
    </button>
    <pre>
<span id="citation-text"><span><span style="color: darkblue; font-weight: bold">@article</span>{
    <span style="color: black; font-weight: bold">ericmjl-2020-tools-to-help-you-write-consistent-python-code</span>,
    <span style="color: green; font-weight:bold">author</span> = <span style="color: maroon">{Eric J. Ma}</span>,
    <span style="color: green; font-weight:bold">title</span> = <span style="color: maroon">{Tools to help you write consistent Python code}</span>,
    <span style="color: green; font-weight:bold">year</span> = <span style="color: maroon">{2020}</span>,
    <span style="color: green; font-weight:bold">month</span> = <span style="color: maroon">{09}</span>,
    <span style="color: green; font-weight:bold">day</span> = <span style="color: maroon">{30}</span>,
    <span style="color: green; font-weight:bold">howpublished</span> = <span style="color: maroon">{\url{https://ericmjl.github.io}}</span>,
    <span style="color: green; font-weight:bold">journal</span> = <span style="color: maroon">{Eric J. Ma's Blog}</span>,
    <span style="color: green; font-weight:bold">url</span> = <span style="color: maroon">{https://ericmjl.github.io/blog/2020/9/30/tools-to-help-you-write-consistent-python-code}</span>,
}
  </span></pre>
    </div>

    <script>
    function copyCitation() {
      const citationElement = document.getElementById('citation-text');
      const text = citationElement.textContent;

      // Create a temporary textarea element
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);

      // Select and copy the text
      textarea.select();
      document.execCommand('copy');

      // Remove the temporary textarea
      document.body.removeChild(textarea);

      // Visual feedback
      const button = document.querySelector('.copy-button');
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="copy-icon">✓</span>';
      button.style.backgroundColor = '#4CAF50';

      // Reset button after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.backgroundColor = '';
      }, 2000);
    }
    </script>

    <style>
    .copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: transparent;
      color: #666;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      z-index: 1;
    }

    .copy-button:hover {
      background-color: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    .copy-icon {
      font-size: 14px;
    }
    </style>
    <hr>
    <p>
      <i>I send out a newsletter with tips and tools
        for data scientists. Come check it out at
        <a href="https://dspn.substack.com">Substack</a>.</i>
    </p>
    <p>
      <i><span>If you would like to sponsor the coffee that goes into making my posts,
        please consider </span>
        <a href="https://github.com/sponsors/ericmjl">GitHub Sponsors</a>!</i>
    </p>
    <p>
      <i><span>Finally, I do free 30-minute GenAI strategy calls for teams
        that are looking to leverage GenAI for maximum impact. Consider </span>
        <a href="https://calendly.com/ericmjl/llm-chat">booking a call on Calendly</a>
        if you're interested!</i>
      </i>
    </p>
  </div>
  <div class="giscus" id="giscus-container"></div>
  <script>
    // Determine theme from localStorage or fallback to light
    var theme = localStorage.getItem('theme') === 'dark' ? 'dark' : 'light';
    var giscusScript = document.createElement('script');
    giscusScript.src = 'https://giscus.app/client.js';
    giscusScript.setAttribute('data-repo', 'ericmjl/website');
    giscusScript.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnk2MDIzMzAxNg==');
    giscusScript.setAttribute('data-category', 'Comments');
    giscusScript.setAttribute('data-category-id', 'DIC_kwDOA5cVOM4Crqx4');
    giscusScript.setAttribute('data-mapping', 'pathname');
    giscusScript.setAttribute('data-strict', '1');
    giscusScript.setAttribute('data-reactions-enabled', '1');
    giscusScript.setAttribute('data-emit-metadata', '0');
    giscusScript.setAttribute('data-input-position', 'top');
    giscusScript.setAttribute('data-theme', theme);
    giscusScript.setAttribute('data-lang', 'en');
    giscusScript.crossOrigin = 'anonymous';
    giscusScript.async = true;
    document.getElementById('giscus-container').appendChild(giscusScript);
  </script>
</div>



        </div>

        <!-- Bottom Navigation (external links) -->
        <div class="terminal-nav">
            <nav class="terminal-menu" id="local-links">
                <ul>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/resume" rel="">
                            Resume</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.linkedin.com/in/ericmjl" rel="">
                            LinkedIn</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="http://github.com/ericmjl" rel="">
                            GitHub</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl--shortmail-run-app.modal.run/send/cce87ae9c1d7" rel="">
                            Contact Me</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://ericmjl.github.io/blog.xml" rel="">
                            Blog RSS</a>
                    </li>
                    
                </ul>
            </nav>
        </div>

    </div>

    <script>
        // Theme toggle functionality
        function setGiscusTheme(theme) {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (!iframe) return;
            iframe.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme
                        }
                    }
                },
                'https://giscus.app'
            );
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');

            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
                localStorage.setItem('theme', 'light');
                setGiscusTheme('light');
            } else {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
                setGiscusTheme('dark');
            }
        }

        // Check for saved theme preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');

            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                setTimeout(() => setGiscusTheme('dark'), 500);
            } else {
                setTimeout(() => setGiscusTheme('light'), 500);
            }
        });
    </script>
</body>
